<form [formGroup]="fieldForm">
    <input type="text" formControlName="name" required/>
    <select
            (change)="selectFieldType()"
            formControlName="typeId"
    >
        <!--
            .slice(1) to skip first element of array t hat doesn't exist.
            Array types start at 1.
         -->
        <option *ngFor="let type of types.slice(1)" [value]="type.id">{{type.label}}</option>
    </select>

    <!-- Sub type selection, if any -->
    <span *ngIf="fieldForm.get('typeId').value"  >{{ fieldForm.get('typeId').value }}</span>
    <select *ngIf="fieldForm.get('typeId').value && types[fieldForm.get('typeId').value].options"
            required
            formControlName="subtype"
    >
        <option selected disabled [value]="0">{{ types[fieldForm.get('typeId').value].options.name }}</option>
        <option *ngFor="let option of types[fieldForm.get('typeId').value].options.options"
                [value]="option.id"
        >{{option.name}}</option>
    </select>

    <!-- Sub type text input, if any -->
    <input type="text"
           *ngIf="fieldForm.get('typeId').value && types[fieldForm.get('typeId').value].textinput"
           [placeholder]="types[fieldForm.get('typeId').value].textinputplaceholder"
           required
           formControlName="subtype"
    />

    <!--{{ diagnostic }}-->
    <p>Form value: {{ fieldForm.value | json }}</p>
    <p>Form status: {{ fieldForm.status | json }}</p>
</form>
